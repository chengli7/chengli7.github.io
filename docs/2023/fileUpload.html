<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>使用vue-simple-uploader实现大文件分片上传 | 屋顶橙子味</title><meta name="description" content="我们都自以为了解，其实谁都未曾看透">
    <link rel="modulepreload" href="/assets/app-572c54b3.js"><link rel="modulepreload" href="/assets/fileUpload.html-58056676.js"><link rel="modulepreload" href="/assets/fileUpload.html-667ac09a.js"><link rel="prefetch" href="/assets/index.html-0a05feab.js" as="script"><link rel="prefetch" href="/assets/index.html-8c2edf06.js" as="script"><link rel="prefetch" href="/assets/index.html-4b3ba946.js" as="script"><link rel="prefetch" href="/assets/index.html-6931c665.js" as="script"><link rel="prefetch" href="/assets/index.html-17c6444b.js" as="script"><link rel="prefetch" href="/assets/index.html-a39f8a11.js" as="script"><link rel="prefetch" href="/assets/index.html-6df72e80.js" as="script"><link rel="prefetch" href="/assets/index.html-37b7eb41.js" as="script"><link rel="prefetch" href="/assets/index.html-5d7f901a.js" as="script"><link rel="prefetch" href="/assets/index.html-84f5975d.js" as="script"><link rel="prefetch" href="/assets/index.html-fd5cbc0b.js" as="script"><link rel="prefetch" href="/assets/index.html-6cf06f14.js" as="script"><link rel="prefetch" href="/assets/index.html-632c7b1c.js" as="script"><link rel="prefetch" href="/assets/self-introduction.html-ef4cf621.js" as="script"><link rel="prefetch" href="/assets/blogPublish.html-a77274c9.js" as="script"><link rel="prefetch" href="/assets/blogQA.html-520dc954.js" as="script"><link rel="prefetch" href="/assets/createBlog.html-cef76c0c.js" as="script"><link rel="prefetch" href="/assets/useelementPlus.html-a84ddf22.js" as="script"><link rel="prefetch" href="/assets/useVue.html-3ce3d443.js" as="script"><link rel="prefetch" href="/assets/guide.html-4cb83d21.js" as="script"><link rel="prefetch" href="/assets/cssRotate.html-36215c60.js" as="script"><link rel="prefetch" href="/assets/dingDingHome.html-cf977956.js" as="script"><link rel="prefetch" href="/assets/home.html-51521d78.js" as="script"><link rel="prefetch" href="/assets/rotateMenu.html-8bd0a554.js" as="script"><link rel="prefetch" href="/assets/steps.html-095a432d.js" as="script"><link rel="prefetch" href="/assets/githubError.html-210b01e6.js" as="script"><link rel="prefetch" href="/assets/useGsap.html-07e48675.js" as="script"><link rel="prefetch" href="/assets/wxQrcode.html-dcec7b4d.js" as="script"><link rel="prefetch" href="/assets/carRoom.html-130ffa0d.js" as="script"><link rel="prefetch" href="/assets/codeFold.html-d0c65f2b.js" as="script"><link rel="prefetch" href="/assets/elementPlusUse.html-2fd7550b.js" as="script"><link rel="prefetch" href="/assets/fiddlerUse.html-5e938b50.js" as="script"><link rel="prefetch" href="/assets/page404.html-f4f9378f.js" as="script"><link rel="prefetch" href="/assets/tableAutoScroll.html-fb801494.js" as="script"><link rel="prefetch" href="/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/assets/index.html-ddeb4078.js" as="script"><link rel="prefetch" href="/assets/index.html-97d109e4.js" as="script"><link rel="prefetch" href="/assets/index.html-ab60251a.js" as="script"><link rel="prefetch" href="/assets/index.html-ebb0149d.js" as="script"><link rel="prefetch" href="/assets/index.html-9c9f9b49.js" as="script"><link rel="prefetch" href="/assets/index.html-87615b9d.js" as="script"><link rel="prefetch" href="/assets/index.html-76007131.js" as="script"><link rel="prefetch" href="/assets/index.html-d99cc650.js" as="script"><link rel="prefetch" href="/assets/index.html-c75d24cd.js" as="script"><link rel="prefetch" href="/assets/index.html-93a4d0de.js" as="script"><link rel="prefetch" href="/assets/index.html-7b1764b0.js" as="script"><link rel="prefetch" href="/assets/index.html-796e7b87.js" as="script"><link rel="prefetch" href="/assets/index.html-416c46be.js" as="script"><link rel="prefetch" href="/assets/self-introduction.html-649f3c37.js" as="script"><link rel="prefetch" href="/assets/blogPublish.html-dedd9e44.js" as="script"><link rel="prefetch" href="/assets/blogQA.html-160ce1da.js" as="script"><link rel="prefetch" href="/assets/createBlog.html-513a92bd.js" as="script"><link rel="prefetch" href="/assets/useelementPlus.html-29dd70a3.js" as="script"><link rel="prefetch" href="/assets/useVue.html-ee6d8d2f.js" as="script"><link rel="prefetch" href="/assets/guide.html-a3c034cd.js" as="script"><link rel="prefetch" href="/assets/cssRotate.html-768b4d63.js" as="script"><link rel="prefetch" href="/assets/dingDingHome.html-27750890.js" as="script"><link rel="prefetch" href="/assets/home.html-7d53924c.js" as="script"><link rel="prefetch" href="/assets/rotateMenu.html-643b7c6e.js" as="script"><link rel="prefetch" href="/assets/steps.html-b574a1cc.js" as="script"><link rel="prefetch" href="/assets/githubError.html-ba794e76.js" as="script"><link rel="prefetch" href="/assets/useGsap.html-b93b3e3d.js" as="script"><link rel="prefetch" href="/assets/wxQrcode.html-646db117.js" as="script"><link rel="prefetch" href="/assets/carRoom.html-40272ffd.js" as="script"><link rel="prefetch" href="/assets/codeFold.html-ffc4fb44.js" as="script"><link rel="prefetch" href="/assets/elementPlusUse.html-cf27d30e.js" as="script"><link rel="prefetch" href="/assets/fiddlerUse.html-8d5cb159.js" as="script"><link rel="prefetch" href="/assets/page404.html-9360152a.js" as="script"><link rel="prefetch" href="/assets/tableAutoScroll.html-e07cd744.js" as="script"><link rel="prefetch" href="/assets/404.html-c50efa9b.js" as="script"><link rel="prefetch" href="/assets/reco-valine-a195b6e9.js" as="script"><link rel="prefetch" href="/assets/giscus-2a044aea-497f0bd4.js" as="script"><link rel="prefetch" href="/assets/CodeBox-ace864ee.js" as="script"><link rel="prefetch" href="/assets/cssRotate-b3640be9.js" as="script"><link rel="prefetch" href="/assets/dingDingHome-86384779.js" as="script"><link rel="prefetch" href="/assets/rotateMenu-308d984e.js" as="script"><link rel="prefetch" href="/assets/steps-29242dc1.js" as="script"><link rel="prefetch" href="/assets/CarRoom-27a409c0.js" as="script"><link rel="prefetch" href="/assets/elementPlusUse-f5f9013f.js" as="script"><link rel="prefetch" href="/assets/DateTimePicker-1620e5b5.js" as="script">
    <link rel="preload" href="/assets/style-1ef4088b.css" as="style"><link rel="stylesheet" href="/assets/style-1ef4088b.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper show-series show-catalog"><header class="navbar-container" style="top:0;"><div class="site-brand nav-item"><img class="logo" src="http://picsum.photos/300/300" alt="屋顶橙子味"><a href="/" class="site-name can-hide">屋顶橙子味</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/" class="link router-link-active" aria-label="首页"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->首页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/docs/2024/elementPlusUse" class="link" aria-label="文档"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文档<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="指南"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->指南<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="指南"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->指南<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/docs/self-introduction" class="link" aria-label="个人简介"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->个人简介<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/blogs/other/guide" class="link" aria-label="主题介绍"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主题介绍<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/timeline" class="link" aria-label="时间线"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->时间线<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/tags/element-plus/1/" class="link" aria-label="Tags"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Tags<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/categories/vue/1/" class="link" aria-label="分类"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->分类<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a class="link" href="https://gitee.com/orange5" target="_blank" rel="noopener noreferrer" aria-label="码云"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->码云<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a class="link" href="https://github.com/chengli7" target="_blank" rel="noopener noreferrer" aria-label="github"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->github<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a class="link" href="https://v2.vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" aria-label="vuepress"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vuepress<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></header><header class="sub-navbar-container"><span class="nav-item"><div class="toggle-series-button" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div> Series </span></header><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><a href="/" class="link router-link-active" aria-label="首页"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->首页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/docs/2024/elementPlusUse" class="link" aria-label="文档"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文档<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="指南"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->指南<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="指南"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->指南<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/docs/self-introduction" class="link" aria-label="个人简介"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->个人简介<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/blogs/other/guide" class="link" aria-label="主题介绍"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主题介绍<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/timeline" class="link" aria-label="时间线"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->时间线<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/tags/element-plus/1/" class="link" aria-label="Tags"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Tags<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/categories/vue/1/" class="link" aria-label="分类"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->分类<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a class="link" href="https://gitee.com/orange5" target="_blank" rel="noopener noreferrer" aria-label="码云"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->码云<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a class="link" href="https://github.com/chengli7" target="_blank" rel="noopener noreferrer" aria-label="github"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->github<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a class="link" href="https://v2.vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" aria-label="vuepress"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vuepress<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><div class="appearance"><span>Appearance</span><span class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span></div></div><div class="series-mask"></div><aside class="series-container"><div class="site-brand"><img class="logo" src="http://picsum.photos/300/300" alt="屋顶橙子味"><a href="/" class="site-name can-hide">屋顶橙子味</a></div><!--[--><!--[--><section class="series-group series-item"><h5 class="series-heading">2024年<span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/docs/2024/elementPlusUse" class="link series-item" aria-label="ElementPlus的使用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ElementPlus的使用<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/2024/fiddlerUse" class="link series-item" aria-label="Fiddler抓包工具使用文档"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Fiddler抓包工具使用文档<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/2024/page404" class="link series-item" aria-label="前端文件打包和服务端一起部署后刷新浏览器返回404问题解决"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端文件打包和服务端一起部署后刷新浏览器返回404问题解决<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/2024/tableAutoScroll" class="link series-item" aria-label="ElementUI的Table表格数据自动滚动的实现方式"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ElementUI的Table表格数据自动滚动的实现方式<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/2024/carRoom" class="link series-item" aria-label="3D汽车展厅"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3D汽车展厅<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading active">2023年<span class="arrow right"></span></h5><ul style="display:none;"><li><!--[--><a href="/docs/2023/githubError" class="link series-item" aria-label="github无法访问解决方式"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->github无法访问解决方式<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/2023/fileUpload" class="link router-link-active series-item active" aria-label="使用vue-simple-uploader实现大文件分片上传"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->使用vue-simple-uploader实现大文件分片上传<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/2023/wxQrcode" class="link series-item" aria-label="微信小程序中使用qrcode.js生成二维码"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序中使用qrcode.js生成二维码<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/2023/useGsap" class="link series-item" aria-label="使用gsap插件实现页面中数字滚动效果"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->使用gsap插件实现页面中数字滚动效果<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">2022年<span class="arrow right"></span></h5><ul style="display:none;"><li><!--[--><a href="/docs/2022/home" class="link series-item" aria-label="微信小程序从注册到上线发布"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序从注册到上线发布<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/2022/cssRotate" class="link series-item" aria-label="css旋转动画"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->css旋转动画<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/2022/dingDingHome" class="link series-item" aria-label="钉钉官网首页动画"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->钉钉官网首页动画<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/2022/rotateMenu" class="link series-item" aria-label="旋转菜单"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->旋转菜单<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/2022/steps" class="link series-item" aria-label="步骤条"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->步骤条<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--]--></aside><!--[--><main class="page-container"><h1 class="page-title">使用vue-simple-uploader实现大文件分片上传</h1><!----><div class="theme-reco-default-content"><div><h2 id="一、背景描述" tabindex="-1"><a class="header-anchor" href="#一、背景描述" aria-hidden="true">#</a> 一、背景描述</h2><p>当用户上传较大的文件时会经常出现上传失败的情况，而且文件上传的过程中没有实时的进度展示，用户使用不方便，需要改进。因此在项目中使用vue-simple-uploader解决了用户痛点。</p><h2 id="二、element-ui等组件库的upload上传组件存在的不足" tabindex="-1"><a class="header-anchor" href="#二、element-ui等组件库的upload上传组件存在的不足" aria-hidden="true">#</a> 二、element-ui等组件库的Up<strong>load</strong>上传组件存在的不足</h2><p>1.后端服务对可上传的文件大小做了限制，遇到大文件时无法上传。</p><p>2.较大文件上传时上传速度慢，用户体验不好。</p><p>3.可暂停、继续上传的功能不容易实现。</p><h2 id="三、为什么使用vue-simple-uploader" tabindex="-1"><a class="header-anchor" href="#三、为什么使用vue-simple-uploader" aria-hidden="true">#</a> 三、为什么使用vue-simple-uploader</h2><p>1.该组件对文件分片、上传进度展示等功能做了封装，且有文档说明，易于上手。</p><p>2.可暂停、继续上传。</p><p>3.支持断点续传、秒传。</p><p>4.上传队列管理，支持最大并发上传。 <img src="/assets/1727056231155-3d06c55f.png" alt="1727056231155"></p><h2 id="四、如何使用vue-simple-uploader" tabindex="-1"><a class="header-anchor" href="#四、如何使用vue-simple-uploader" aria-hidden="true">#</a> 四、如何使用vue-simple-uploader</h2><p>1.安装:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> vue-simple-uploader –save
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.在main.js中初始化：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> uploader <span class="token keyword">from</span> <span class="token string">&#39;vue-simple-uploader&#39;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>uploader<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3.在页面中引入标签及配置，具体用法可参考; <a href="https://github.com/simple-uploader/vue-uploader/blob/master/README_zh-CN.md" target="_blank" rel="noopener noreferrer">https://github.com/simple-uploader/vue-uploader/blob/master/README_zh-CN.md<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="五、vue-simple-uploader在项目中的应用" tabindex="-1"><a class="header-anchor" href="#五、vue-simple-uploader在项目中的应用" aria-hidden="true">#</a> 五、vue-simple-uploader在项目中的应用</h2><p>1.组件引用：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uploader</span>
      <span class="token attr-name">:autoStart</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>options<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:file-status-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>statusText<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>uploader-example<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@file-progress</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onFileProgress<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@file-complete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fileComplete<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@complete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>complete<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@file-success</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fileSuccess<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@files-added</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>filesAdded<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uploader-unsupport</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uploader-unsupport</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uploader-drop</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin-bottom</span><span class="token punctuation">:</span> 20px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>将文件拖放到此处以上传<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uploader-btn</span> <span class="token attr-name">:attrs</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>attrsFile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>选择文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uploader-btn</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uploader-btn</span> <span class="token attr-name">:attrs</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>attrs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>选择图片<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uploader-btn</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- &lt;uploader-btn :directory=&quot;true&quot;&gt;选择文件夹&lt;/uploader-btn&gt; --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uploader-drop</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- &lt;uploader-list&gt;&lt;/uploader-list&gt; --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uploader-files</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uploader-files</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uploader</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- &lt;br /&gt;
    &lt;el-button @click=&quot;allStart()&quot; type=&quot;primary&quot; :disabled=&quot;disabled&quot;
      &gt;全部开始&lt;/el-button
    &gt;
    &lt;el-button @click=&quot;allStop()&quot; style=&quot;margin-left: 4px&quot;&gt;全部暂停&lt;/el-button&gt;
    &lt;el-button @click=&quot;allRemove()&quot; style=&quot;margin-left: 4px&quot;
      &gt;全部移除&lt;/el-button
    &gt; --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.组件配置：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// target: `http://53.5.83.203:17114/cloudCommon/uploadFile/${fileId}/${uploadId}/{partNum}`,</span>
        <span class="token function-variable function">target</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> chunk</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fileId<span class="token punctuation">)</span>
          <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>uploadBaseURL<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/cgintegration/cloudCommon/uploadFile/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
            file<span class="token punctuation">.</span>fileId
          <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>file<span class="token punctuation">.</span>uploadId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chunk<span class="token punctuation">.</span>offset <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 开启服务端分片校验功能</span>
        <span class="token literal-property property">testChunks</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">forceChunkSize</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// singleFile: true,</span>
        <span class="token literal-property property">simultaneousUploads</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        <span class="token literal-property property">chunkSize</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
        <span class="token function-variable function">parseTimeRemaining</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">timeRemaining<span class="token punctuation">,</span> parsedTimeRemaining</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> parsedTimeRemaining
            <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\syears?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;年&#39;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\days?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;天&#39;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\shours?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;小时&#39;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\sminutes?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;分钟&#39;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\sseconds?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;秒&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token literal-property property">attrs</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">accept</span><span class="token operator">:</span> <span class="token string">&#39;image/*&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">attrsFile</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">accept</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&#39;.doc&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.docx&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.xlsx&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.xls&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.pdf&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.jpg&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.png&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.pptx&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.ppt&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.jpge&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.zip&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.rar&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.ZIP&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.RAR&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.DOC&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.DOCX&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.XLSX&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.XLS&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.PDF&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.JPG&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.PNG&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.PPTX&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.PPT&#39;</span><span class="token punctuation">,</span>
          <span class="token string">&#39;.JPGE&#39;</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">statusText</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token string">&#39;上传成功&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">error</span><span class="token operator">:</span> <span class="token string">&#39;上传出错了&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">uploading</span><span class="token operator">:</span> <span class="token string">&#39;上传中...&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">paused</span><span class="token operator">:</span> <span class="token string">&#39;暂停中...&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">waiting</span><span class="token operator">:</span> <span class="token string">&#39;等待中...&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">cmd5</span><span class="token operator">:</span> <span class="token string">&#39;计算文件MD5中...&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">fileList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">disabled</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">fileTypeArr</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//pdf</span>
          <span class="token literal-property property">suffix</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;pdf&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PDF&#39;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">//doc</span>
          <span class="token literal-property property">suffix</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;doc&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;DOC&#39;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">//docx</span>
          <span class="token literal-property property">suffix</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;docx&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;DOCX&#39;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">//zip</span>
          <span class="token literal-property property">suffix</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;zip&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ZIP&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;rar&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;RAR&#39;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token comment">//excel</span>
          <span class="token literal-property property">suffix</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;xlsx&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;xls&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;XLSX&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;XLS&#39;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">//ppt</span>
          <span class="token literal-property property">suffix</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;ppt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;pptx&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PPT&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PPTX&#39;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token comment">//图片</span>
          <span class="token literal-property property">suffix</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;jpg&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;png&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;jpge&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;JPG&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PNG&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;JPGE&#39;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunkFileArr</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.文件上传处理步骤</p><p>（1）、选择要上传的文件后会触发filesAdded方法，在该方法中调用接口初始化每个文件的uploadId和fileId（后面的文件合并时需要用到），还需要给每个文件的切片添加MD5值。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 文件选择</span>
    <span class="token function">filesAdded</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> fileList<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;isClose&#39;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
      file<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">innitUploadTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> <span class="token punctuation">{</span> code<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> res
          <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">===</span> <span class="token string">&#39;0&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// fileId = data.key</span>
            <span class="token comment">// uploadId = data.uploadId</span>
            e<span class="token punctuation">.</span>uploadId <span class="token operator">=</span> data<span class="token punctuation">.</span>uploadId
            e<span class="token punctuation">.</span>fileId <span class="token operator">=</span> data<span class="token punctuation">.</span>key
            <span class="token keyword">this</span><span class="token punctuation">.</span>fileList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">computeMD5</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;文件上传初始化失败！&#39;</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（2）文件分片时添加MD5值，分片完成后开始上传文件。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 添加MD5</span>
    <span class="token function">computeMD5</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>
      <span class="token keyword">let</span> fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">let</span> blobSlice <span class="token operator">=</span>
        <span class="token class-name">File</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>slice <span class="token operator">||</span>
        <span class="token class-name">File</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>mozSlice <span class="token operator">||</span>
        <span class="token class-name">File</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>webkitSlice
      <span class="token keyword">let</span> currentChunk <span class="token operator">=</span> <span class="token number">0</span>
      <span class="token keyword">const</span> chunkSize <span class="token operator">=</span> _this<span class="token punctuation">.</span>options<span class="token punctuation">.</span>chunkSize
      <span class="token keyword">let</span> chunks <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>size <span class="token operator">/</span> chunkSize<span class="token punctuation">)</span>
      <span class="token keyword">let</span> spark <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SparkMD5<span class="token punctuation">.</span>ArrayBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 文件状态设为&quot;计算MD5&quot;</span>
      file<span class="token punctuation">.</span>cmd5 <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">//文件状态为“计算md5...”</span>
      file<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">loadNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">let</span> chunkFileArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      fileReader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        spark<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>currentChunk <span class="token operator">&lt;</span> chunks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          currentChunk<span class="token operator">++</span>
          <span class="token function">loadNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token comment">// 实时展示MD5的计算进度</span>
          <span class="token keyword">let</span> md5 <span class="token operator">=</span> spark<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token keyword">let</span> etage <span class="token operator">=</span> md5
          chunkFileArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> etage <span class="token punctuation">}</span><span class="token punctuation">)</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">第</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>currentChunk<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">分片解析完成, 开始第</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
              currentChunk <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> / </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chunks<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">分片解析, md5:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>md5<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
          <span class="token punctuation">)</span>
          file<span class="token punctuation">.</span>cmd5Arr <span class="token operator">=</span> chunkFileArr
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> md5 <span class="token operator">=</span> spark<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">MD5计算完毕：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> \nMD5：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>md5<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> \n分片：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>chunks<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 大小:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
              file<span class="token punctuation">.</span>size
            <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 用时：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ms</span><span class="token template-punctuation string">`</span></span>
          <span class="token punctuation">)</span>
          spark<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//释放缓存</span>
          file<span class="token punctuation">.</span>uniqueIdentifier <span class="token operator">=</span> md5 <span class="token comment">//将文件md5赋值给文件唯一标识</span>
          file<span class="token punctuation">.</span>cmd5 <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">//取消计算md5状态</span>
          file<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//开始上传</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      fileReader<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">文件</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">读取出错，请检查该文件</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        file<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">function</span> <span class="token function">loadNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> start <span class="token operator">=</span> currentChunk <span class="token operator">*</span> chunkSize
        <span class="token keyword">let</span> end <span class="token operator">=</span> start <span class="token operator">+</span> chunkSize <span class="token operator">&gt;=</span> file<span class="token punctuation">.</span>size <span class="token operator">?</span> file<span class="token punctuation">.</span>size <span class="token operator">:</span> start <span class="token operator">+</span> chunkSize
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span>
        fileReader<span class="token punctuation">.</span><span class="token function">readAsArrayBuffer</span><span class="token punctuation">(</span><span class="token function">blobSlice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>file<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（3）所有分片上传完成后调用接口合并文件，给接口传uploadId、fileId、每一片的序号、大小、MD5值等信息，合并完成后接口返回文件的地址信息。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 文件合并</span>
    <span class="token function">fileSuccess</span><span class="token punctuation">(</span><span class="token parameter">rootFile<span class="token punctuation">,</span> file<span class="token punctuation">,</span> response<span class="token punctuation">,</span> chunk</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      file<span class="token punctuation">.</span>chunks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        item<span class="token punctuation">.</span>etage <span class="token operator">=</span> file<span class="token punctuation">.</span>cmd5Arr<span class="token punctuation">[</span>item<span class="token punctuation">.</span>offset<span class="token punctuation">]</span><span class="token punctuation">.</span>etage
        item<span class="token punctuation">.</span>partNumber <span class="token operator">=</span> item<span class="token punctuation">.</span>offset <span class="token operator">+</span> <span class="token number">1</span>
        item<span class="token punctuation">.</span>partSize <span class="token operator">=</span> item<span class="token punctuation">.</span>bytes<span class="token punctuation">.</span>size
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>chunks<span class="token punctuation">)</span>
      <span class="token keyword">let</span> completeMultipartUploadXml <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">completeMultipartUpload</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">part</span><span class="token operator">:</span> file<span class="token punctuation">.</span>chunks<span class="token punctuation">,</span>
          <span class="token literal-property property">totalPartNum</span><span class="token operator">:</span> file<span class="token punctuation">.</span>chunks<span class="token punctuation">.</span>length
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token function">mergeFile</span><span class="token punctuation">(</span>
        file<span class="token punctuation">.</span>fileId<span class="token punctuation">,</span>
        file<span class="token punctuation">.</span>uploadId<span class="token punctuation">,</span>
        file<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
        completeMultipartUploadXml
      <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token keyword">const</span> extension <span class="token operator">=</span> file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> fileType <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fileTypeArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> flag <span class="token operator">=</span> type<span class="token punctuation">.</span>suffix<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ele</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ele <span class="token operator">===</span> extension<span class="token punctuation">)</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fileType <span class="token operator">=</span> type<span class="token punctuation">.</span>type
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> params <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>folderId<span class="token punctuation">,</span>
          <span class="token literal-property property">materialUrl</span><span class="token operator">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
          <span class="token literal-property property">materialName</span><span class="token operator">:</span> file<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
          <span class="token literal-property property">fileType</span><span class="token operator">:</span> fileType
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">insertProjectFile</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="五、总结" tabindex="-1"><a class="header-anchor" href="#五、总结" aria-hidden="true">#</a> 五、总结</h2><p>本文简单介绍了文件分片上传组件vue-simple-uploader的功能及在项目中的配置和使用流程。</p></div></div><footer class="page-meta"><!----><!----></footer><!----><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/2023/fileUpload.html#一、背景描述" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="一、背景描述"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->一、背景描述<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/2023/fileUpload.html#二、element-ui等组件库的upload上传组件存在的不足" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="二、element-ui等组件库的Upload上传组件存在的不足"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->二、element-ui等组件库的Upload上传组件存在的不足<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/2023/fileUpload.html#三、为什么使用vue-simple-uploader" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="三、为什么使用vue-simple-uploader"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->三、为什么使用vue-simple-uploader<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/2023/fileUpload.html#四、如何使用vue-simple-uploader" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="四、如何使用vue-simple-uploader"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->四、如何使用vue-simple-uploader<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/2023/fileUpload.html#五、vue-simple-uploader在项目中的应用" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="五、vue-simple-uploader在项目中的应用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->五、vue-simple-uploader在项目中的应用<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/2023/fileUpload.html#五、总结" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="五、总结"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->五、总结<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--></ul></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-572c54b3.js" defer></script>
  </body>
</html>
